## Title: [1Week] 윤준석

### 미션 요구사항 분석 & 체크리스트

---
- 호감목록 페이지에서 특정 항목에서 삭제버튼을 누르면, 해당 항목은 삭제되어야하는 호감상대 삭제 기능을 구현해야 한다
- 삭제를 처리하기 전에 해당 항목에 대한 소유권이 본인(로그인한 사람)에게 있는지 체크해야 한다
- 삭제 후 다시 호감목록 페이지로 돌아와야 한다


- 카카오 로그인이 가능한것 처럼, 구글 로그인으로도 가입 및 로그인 처리가 되어야 한다


- [x] 호감상대 삭제 기능
    - [x] 본인 확인 필수
    - [x] 호감목록 페이지로 리다이렉트
  

- [x] 구글 로그인 기능

### 1주차 미션 요약

---

**[접근 방법]**

※ 우선 DBMS의 주소, 계정 정보나 앱키들은 공개되면 안되는 정보이기에 따로 application-secret.yml 파일을 만들어 따로 저장한 뒤 gitignore 파일에 추가해주었다

기능을 구현하기 위해 다음과 같이 접근을 하였다
- 현재 호감목록 기능과 삭제 버튼은 구현되어 있기 때문에 삭제를 처리하는 Controller만 만들어주면 된다
- Spring Data JPA에 이미 구현된 delete를 사용하면 간단하게 호감 삭제가 가능할 것이다
- 삭제를 처리하기 전에 해당 항목에 대한 소유권이 본인에게 있는지 확인해야 하는데, rq를 통해 얻은 Member의 username과 url의 id값을 통해 찾은 LikeablePerson의 fromInstaMemberUsername을 비교하면 될 것이다
- 삭제 후 다시 호감 목록에 돌아와야 하는데, add Controller와 같이 rq.redirectWithMsg를 사용하면 될 것이다


- 이미 OAuth2 관련 기능은 구현되어 있기 때문에 구글 로그인을 구현하려면 카카오 로그인 구현처럼 앱을 등록한 후 앱키를 받아 application.yml에 관련 정보를 넣으면 될 것이다

호감상대 삭제 기능은 기존의 기능을 참고하여 쉽게 구현할 수 있었고, 그 결과 호감목록에서 결과 삭제 버튼을 누르면 DB에서도 삭제되고 목록상으로도 정상적으로 삭제됨을 확인할 수 있었다

처음엔 기능 구현을 최우선적인 목표로 하였기 때문에 LikeablePersonRepository가 상속받은 JPA JpaRepository의 id값이 Integer이 돼있음을 망각하고 Long으로 받은 id값을 Integer 값을 변환시키는 불필요한 코드가 생기게 돼었다.
당장은 정상적으로 작동하나 나중에 id 값이 Integer의 크기보다 커져 오류가 발생할 수도 있기 때문에 LikeablePersonRepository가 상속받은 JPA JpaRepository의 id값을 Long으로 바꾸는 방식으로 리팩토링하였다

OAuth2.0 방식으로 구글 로그인을 구현하기 위해 블로그를 참고하였다.(https://yeonyeon.tistory.com/34) 
카카오 로그인 구현과 비슷한 방식으로로 구글 클라우드에 앱 등록을 한 뒤 앱키를 받았고, application-secret.yml에 client-id, client-secret, scope 값을 추가하였다. (github상으로는 볼 수 없다) 그 결과 구글 로그인도 정상적으로 작동함을 확인할 수 있었다


**[특이사항]**

- 다른 기능에도 본인 확인이 필요한 경우가 있을 수 있기 때문에 호감상대 삭제 기능에서 구현한 본인 확인 기능에 대해 모듈화를 하면 좋을 것 같다 


- 구글 로그인 구현에 필요한 application.yml 작성 정보는 3개면 충분했으나 추가적으로 설정할 수 있는 여러 정보들이 있을 것 같아 추후 좀 더 세부적으로 설정을 하면 좋을 것 같다