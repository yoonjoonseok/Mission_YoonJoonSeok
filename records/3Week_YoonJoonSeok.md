## Title: [3Week] 윤준석

### 미션 요구사항 분석 & 체크리스트

---
- 호감표시/호감사유변경 후, 개별 호감표시건에 대해서, 3시간 동안은 호감취소와 호감사유변경을 할 수 없어야 한다
- 네이버클라우드플랫폼을 통한 배포(도메인 없이, IP로 접속)


- 호감표시를 받았거나, 본인에 대한 호감사유가 변경된 경우에 알림페이지에서 확인이 가능해야 한다


- [x] 호감표시/호감사유변경 후 3시간 동안은 호감취소/호감사유변경 불가
    - [x] 테스트 케이스
- [x] 네이버클라우드플랫폼을 통한 배포


- [x] 알림 기능

### 3주차 미션 요약

---

**[접근 방법]**

기능을 구현하기 위해 다음과 같이 접근을 하였다
- LikeablePerson의 modifyUnlockDate가 현재 시각을 지나지 않았을 경우 Fail RsData를 반환하면 정해진 쿨타임 시간 동안 호감취소와 호감사유변경을 하지 못할 것이다


- 호감표시/호감사유변경 성공 시 NotificationService를 호출하고 Notification을 DB에 저장하면 알림페이지를 통해 알림을 확인할 수 있을 것이다

쿨타임 기능을 테스트하기 위해 MockMVC를 사용한 테스트케이스를 만들었다. 쿨타임 기능을 위한 기반은 이미 구현이 되있는 상태였기 때문에 호감취소/호감사유변경 시 백엔드 상에서 LikeablePerson의 modifyUnlockDate가 현재 시각을 지나지 않았을 경우 Fail RsData를 반환하는 것으로 쉽게 구현할 수 있었다. 

네이버 클라우드 플랫폼을 통한 배포의 경우 아직 도메인을 구입하지 않았기 때문에 아직 NPM 도입은 하지 않았다. 해당 리포지토리를 클론한 뒤 3Week 브랜치로 checkout하였다. 그 후 빌드하여 이미지를 생성하고 컨테이너에서 이미지를 실행하였다. 클라우드 서버의 공인 IP로 접속을 해보니 정상적으로 실행되는 것을 확인할 수 있었다.

알림 기능은 list 기능이기 때문에 init 데이터를 삽입하여 브라우저 상에서 눈으로 직접 확인하고 싶어 테스트 케이스는 작성하지 않았다. 호감표시/호감사유변경 성공 시 NotificationService를 호출하고 적절한 Notification을 생성한 후 JPA를 통해 DB에 저장하면 알림페이지에서 Notification List를 가져와 보여주도록 구현하였다.
호감표시/호감사유변경 시간을 보기 좋게 출력하거나 호감사유 및 성별을 한글로 출력하기 위해 Notification class 안에 출력함수를 새로 만들었다. 


**[특이사항]**

- 추후에 추가될 기능을 고려하여 코딩을 하다보니 현재는 불필요한 부분이 생긴 것 같아 추후에 리팩토링이 필요할 것 같다


- 도메인을 구입하고 NPM 도입을 하면 좋을 것 같다


- 현재 알림을 읽으면 읽은 시간을 저장하지만 아무런 영향을 끼치지 않는데, 알림을 읽고 다시 알림페이지를 볼 경우 읽은 알림은 목록에서 사라지는 기능도 구현하면 좋을 것 같다


- 알림목록을 띄우는 과정에서 출력 형식을 서버에서 미리 만들었는데 js를 통해 브라우저에서 처리하는 방법도 고려해보는게 좋을 것 같다